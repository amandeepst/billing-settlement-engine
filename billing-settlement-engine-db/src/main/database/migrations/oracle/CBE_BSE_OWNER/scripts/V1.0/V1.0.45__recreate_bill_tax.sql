DROP TABLE bill_tax;

CREATE TABLE bill_tax
(
    bill_tax_id   VARCHAR2(64)  NOT NULL ENABLE,
    bill_id       VARCHAR2(64)  NOT NULL ENABLE,
    merch_tax_reg VARCHAR2(16),
    wp_tax_reg    VARCHAR2(16)  NOT NULL ENABLE,
    tax_type      VARCHAR2(10),
    tax_authority VARCHAR2(10),
    rev_chg_flg   CHAR(1),
    cre_dttm      TIMESTAMP     NOT NULL ENABLE,
    batch_code    VARCHAR2(128) NOT NULL ENABLE,
    batch_attempt NUMBER(3, 0)  NOT NULL ENABLE,
    partition_id  INTEGER       NOT NULL ENABLE,
    ilm_dt        TIMESTAMP     NOT NULL ENABLE,
    ilm_arch_sw   CHAR(1)       NOT NULL ENABLE,
    partition     NUMBER(3, 0) GENERATED ALWAYS AS (MOD(partition_id, 64)) VIRTUAL
)
    TABLESPACE CBE_BSE_DATA
    PARTITION BY RANGE (ilm_dt) INTERVAL(NUMTODSINTERVAL(1, 'DAY'))
 SUBPARTITION BY LIST(partition)
  SUBPARTITION TEMPLATE (
    SUBPARTITION p001 VALUES (0, 1, 2, 3),
    SUBPARTITION p002 VALUES (4, 5, 6, 7),
    SUBPARTITION p003 VALUES (8, 9, 10, 11),
    SUBPARTITION p004 VALUES (12, 13, 14, 15),
    SUBPARTITION p005 VALUES (16, 17, 18, 19),
    SUBPARTITION p006 VALUES (20, 21, 22, 23),
    SUBPARTITION p007 VALUES (24, 25, 26, 27),
    SUBPARTITION p008 VALUES (28, 29, 30, 31),
    SUBPARTITION p009 VALUES (32, 33, 34, 35),
    SUBPARTITION p010 VALUES (36, 37, 38, 39),
    SUBPARTITION p011 VALUES (40, 41, 42, 43),
    SUBPARTITION p012 VALUES (44, 45, 46, 47),
    SUBPARTITION p013 VALUES (48, 49, 50, 51),
    SUBPARTITION p014 VALUES (52, 53, 54, 55),
    SUBPARTITION p015 VALUES (56, 57, 58, 59),
    SUBPARTITION p016 VALUES (60, 61, 62, 63)
    )
  (PARTITION before_2021 VALUES LESS THAN (TO_DATE('01-JAN-2021', 'dd-MON-yyyy')))
;

